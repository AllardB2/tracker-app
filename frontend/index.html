<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drone Tracker - Live Delivery</title>

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="logo-container">
          <svg
            width="237"
            height="36"
            viewBox="0 0 237 36"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M38.981 18.0091C37.4051 18.0091 35.8292 18.0012 34.2548 18.0107C32.4 18.0219 30.7531 17.4993 29.3301 16.2438C28.4019 15.4248 27.4043 14.6872 26.432 13.9192C25.945 13.5336 25.3856 13.3424 24.7678 13.3058C21.3874 13.1003 18.0087 12.8756 14.6267 12.6876C11.902 12.5362 11.4576 12.0853 11.4639 9.33375C11.4639 8.96252 11.467 8.58969 11.467 8.21846C11.467 6.85302 11.6908 6.54393 12.9957 6.0994C13.0209 6.09144 13.0461 6.08666 13.0713 6.0771C13.3975 5.95282 13.6465 4.22093 13.418 3.43863C13.2541 2.8778 12.8034 3.19168 12.5008 3.22673C8.99912 3.62983 5.49742 3.92299 1.98942 3.31595C1.55131 3.24107 1.11793 3.11998 0.69716 2.97499C0.411918 2.87621 -0.0183082 2.79336 0.000602855 2.43328C0.017938 2.09391 0.445012 2.01265 0.733406 1.91706C1.71048 1.59681 2.72064 1.44067 3.74342 1.36738C6.63839 1.16184 9.51287 1.44545 12.3795 1.79597C12.8239 1.85014 13.0792 1.87244 13.2147 1.31002C13.3959 0.567553 13.9381 0.0178726 14.7197 0.000346541C15.4746 -0.0155862 16.0135 0.519753 16.2058 1.2192C16.3555 1.76569 16.6156 1.76729 17.0426 1.70993C19.8872 1.32436 22.7459 1.24788 25.6093 1.35622C26.61 1.39446 27.5966 1.53786 28.5453 1.87085C28.8715 1.98557 29.39 2.00469 29.3569 2.45877C29.3285 2.86506 28.8384 2.92082 28.4949 3.03394C27.3365 3.40996 26.1357 3.52945 24.9301 3.61071C22.084 3.8019 19.2663 3.4944 16.4627 3.04987C15.8307 2.9495 15.6196 3.08811 15.6795 3.74454C15.733 4.3229 15.7393 4.91719 15.6747 5.49396C15.6117 6.05479 15.9064 6.2173 16.3398 6.3129C17.3688 6.54074 17.6951 6.93268 17.7739 8.03842C17.8716 9.41182 17.8716 9.40704 19.2426 9.40704C21.8681 9.40545 24.4952 9.3943 27.1206 9.4166C27.8661 9.42298 28.5027 9.2286 29.0874 8.76177C31.0337 7.20992 33.2289 6.45311 35.7315 6.52959C38.0134 6.59969 40.3001 6.56942 42.5852 6.54074C44.8277 6.51206 46.8244 7.20354 48.58 8.57535C49.327 9.15849 50.1023 9.40704 51.0479 9.3927C53.883 9.34969 56.7196 9.36243 59.5547 9.3927C60.1283 9.39908 60.3427 9.25887 60.3017 8.64864C60.2134 7.35331 60.5964 6.32565 62.0289 6.05001C62.3299 5.99265 62.3141 5.80305 62.3141 5.58637C62.3141 4.92197 62.2842 4.25598 62.3299 3.59637C62.3709 3.02279 62.1392 2.95109 61.6459 3.02279C59.0993 3.39402 56.551 3.73976 53.9649 3.65054C52.6238 3.60274 51.2969 3.4705 49.9936 3.1391C49.7903 3.08811 49.5791 3.0451 49.3932 2.95109C49.1457 2.82682 48.7738 2.75352 48.7912 2.40938C48.8053 2.12577 49.1237 2.01265 49.3711 1.93777C49.8722 1.78641 50.3781 1.63186 50.8919 1.54423C53.6103 1.08377 56.3367 1.30046 59.0614 1.48528C59.4806 1.51396 59.9014 1.53467 60.3159 1.59203C61.0235 1.68922 61.7184 1.96485 61.9958 0.859122C62.1361 0.295102 62.7712 -0.0474507 63.3889 0.0162803C64.0981 0.0911642 64.6339 0.570739 64.7631 1.26541C64.8782 1.87882 65.1461 1.85651 65.6189 1.79597C68.4602 1.4327 71.3127 1.20168 74.1793 1.35622C75.2745 1.41517 76.3682 1.57132 77.4241 1.89475C77.7188 1.98557 78.1254 2.08594 78.1396 2.43009C78.1553 2.79017 77.7424 2.89055 77.454 2.98614C76.3272 3.36216 75.1611 3.55016 73.9791 3.6123C71.3221 3.75251 68.6809 3.53264 66.0428 3.23629C65.756 3.20442 65.466 3.19646 65.1823 3.14388C64.7395 3.06262 64.5488 3.21717 64.5835 3.6824C64.6103 4.02496 64.6213 4.37548 64.5882 4.71644C64.5126 5.49715 64.5929 6.05479 65.5668 6.23483C66.2602 6.36229 66.5786 7.03784 66.5896 7.76756C66.6022 8.64386 66.6054 9.52016 66.5786 10.3949C66.5376 11.73 65.8647 12.447 64.5598 12.5346C61.2079 12.7609 57.8559 13.019 54.5007 13.1672C53.0115 13.2325 51.7381 13.6197 50.6539 14.6792C50.0566 15.2623 49.3601 15.7419 48.7281 16.29C47.3697 17.4674 45.7827 17.9868 44.0161 17.9996C42.3362 18.0107 40.6547 18.0028 38.9747 18.0028V18.0075L38.981 18.0091Z"
              fill="#5EBAEB"
            />
            <path
              d="M38.2437 30.467C38.2437 31.9774 38.2311 33.4894 38.25 34.9998C38.2563 35.5368 38.2043 35.7774 37.5692 35.5177C35.4575 34.6573 33.3252 33.8479 31.1978 33.0306C30.6351 32.8139 30.3846 32.441 30.3877 31.8244C30.4019 29.2003 30.3846 26.5762 30.3925 23.9521C30.3956 22.9499 30.8841 22.5835 31.7887 22.9053C33.7381 23.6016 35.6781 24.3265 37.6307 25.0164C38.0924 25.1805 38.2673 25.4211 38.2547 25.9357C38.2169 27.4461 38.2405 28.9566 38.2405 30.4686H38.2437V30.467Z"
              fill="#5EBAEB"
            />
            <path
              d="M39.63 30.4367C39.63 28.8992 39.6458 27.3633 39.619 25.8258C39.6111 25.3828 39.7435 25.1741 40.1658 25.0275C42.172 24.3361 44.1639 23.6048 46.1638 22.8942C47.0321 22.5851 47.5222 22.9404 47.5222 23.8804C47.5238 26.53 47.5096 29.1796 47.527 31.8292C47.5317 32.449 47.2969 32.8075 46.7232 33.0242C44.5642 33.8368 42.4099 34.6589 40.2683 35.5145C39.7135 35.7359 39.6127 35.5941 39.6206 35.0477C39.6458 33.5117 39.63 31.9742 39.6284 30.4367H39.63Z"
              fill="#5EBAEB"
            />
            <path
              d="M21.2617 28.6952C21.1782 23.7242 22.9132 19.6533 25.6128 15.9203C25.9012 15.5204 26.1218 15.4821 26.4733 15.847C26.8924 16.2836 27.34 16.7026 27.8238 17.0643C28.232 17.3702 28.1831 17.5534 27.8742 17.9183C25.7042 20.4866 24.2039 23.3928 23.6524 26.7546C23.4491 27.9909 23.4554 29.2385 23.4664 30.486C23.4743 31.4229 23.0803 31.9423 22.3932 31.9502C21.714 31.9582 21.2885 31.4181 21.2633 30.5131C21.2633 30.4605 21.2633 30.4064 21.2633 30.3538C21.2633 29.7165 21.2633 29.0792 21.2633 28.6952H21.2617Z"
              fill="#5EBAEB"
            />
            <path
              d="M56.7686 28.41C56.7686 29.1254 56.7781 29.8408 56.7655 30.5561C56.7544 31.3145 56.2312 31.9535 55.6513 31.9423C54.9957 31.9311 54.545 31.399 54.5734 30.5609C54.6726 27.6102 54.2787 24.7614 52.9706 22.0863C52.2363 20.5838 51.3616 19.1706 50.2364 17.9358C49.8724 17.5375 49.9275 17.3352 50.3152 17.0308C50.7896 16.658 51.2308 16.2374 51.6563 15.8072C51.9494 15.5124 52.1165 15.5124 52.386 15.863C55.2431 19.5498 56.8506 23.678 56.767 28.4116L56.7686 28.41Z"
              fill="#5EBAEB"
            />
            <path
              d="M44.5599 21.9445C42.6624 22.679 40.8832 23.3641 39.1087 24.0619C38.9102 24.14 38.7526 24.089 38.5855 24.0237C36.9056 23.3609 35.2288 22.6949 33.541 22.0257C36.1901 20.0612 39.9251 18.9204 44.5614 21.9445H44.5599Z"
              fill="#5EBAEB"
            />
            <path
              d="M81.2642 25.6698L89.0922 9.96021H94.3555L102.157 25.6698H98.0424L96.4661 22.2767H86.9014L85.1648 25.6698H81.2642ZM87.8633 19.6585H95.4776L91.8174 12.3647H91.5502L87.8633 19.6585ZM104.3 25.6698V9.96021H120.918V12.525H107.827V16.212H117.819V18.857H107.827V23.105H121.025L122.094 25.3759C122.094 25.4472 121.853 25.5184 121.372 25.5896C120.891 25.6431 120.063 25.6698 118.888 25.6698H104.3ZM141.828 25.937C141.115 25.937 140.412 25.8301 139.717 25.6164C139.04 25.3848 138.265 24.8327 137.393 23.9599L135.469 22.0363C134.685 21.2348 133.821 20.647 132.877 20.273C131.951 19.8989 130.785 19.7119 129.377 19.7119H128.549V25.6698H125.023V12.0976L124.755 9.9335H136.591C137.731 9.9335 138.622 10.0849 139.263 10.3877C139.922 10.6905 140.403 11.0912 140.705 11.59C141.026 12.0709 141.231 12.5874 141.32 13.1395C141.409 13.6917 141.454 14.2171 141.454 14.7158V15.2235C141.454 15.6153 141.4 16.0517 141.293 16.5326C141.186 17.0135 140.982 17.4855 140.679 17.9486C140.376 18.4117 139.94 18.8035 139.37 19.1241C138.817 19.4447 138.087 19.6318 137.179 19.6852C137.41 19.8099 137.704 20.0058 138.06 20.273C138.417 20.5223 138.782 20.7984 139.156 21.1012C139.548 21.404 139.904 21.6801 140.225 21.9294C140.545 22.1788 140.795 22.3569 140.973 22.4638C141.614 22.8378 142.184 23.0961 142.683 23.2386C143.181 23.381 143.591 23.4612 143.912 23.479C144.232 23.4968 144.419 23.5057 144.473 23.5057L143.938 25.6698C143.778 25.7232 143.511 25.7767 143.137 25.8301C142.763 25.9013 142.326 25.937 141.828 25.937ZM132.557 17.2807C133.234 17.2807 133.839 17.2718 134.374 17.2539C134.908 17.2183 135.389 17.1827 135.816 17.1471C136.6 17.058 137.143 16.8443 137.446 16.5059C137.767 16.1496 137.927 15.6955 137.927 15.1433V14.5288C137.927 13.9589 137.776 13.4779 137.473 13.0861C137.17 12.6943 136.627 12.4983 135.843 12.4983H128.549V17.1471C129.333 17.2005 130.054 17.2361 130.713 17.2539C131.372 17.2718 131.987 17.2807 132.557 17.2807ZM151.502 25.6698C150.256 25.6698 149.276 25.4917 148.564 25.1355C147.851 24.7792 147.344 24.2449 147.041 23.5324C146.756 22.82 146.613 21.9383 146.613 20.8875V14.7158C146.613 13.6828 146.756 12.8189 147.041 12.1243C147.326 11.4118 147.824 10.8775 148.537 10.5213C149.249 10.1472 150.238 9.96021 151.502 9.96021H159.304C160.551 9.96021 161.521 10.1472 162.216 10.5213C162.928 10.8775 163.427 11.4118 163.712 12.1243C164.015 12.8189 164.166 13.6828 164.166 14.7158V20.8875C164.166 22.4549 163.819 23.6482 163.124 24.4675C162.43 25.269 161.156 25.6698 159.304 25.6698H151.502ZM152.277 23.105H158.556C159.215 23.105 159.722 22.9358 160.079 22.5973C160.453 22.2589 160.64 21.7958 160.64 21.2081V14.3952C160.64 13.8787 160.453 13.4423 160.079 13.0861C159.705 12.7121 159.197 12.525 158.556 12.525H152.277C151.636 12.525 151.12 12.6943 150.728 13.0327C150.336 13.3711 150.14 13.8253 150.14 14.3952V21.2081C150.14 21.8136 150.327 22.2856 150.701 22.6241C151.093 22.9447 151.618 23.105 152.277 23.105ZM168.171 25.6698L168.438 23.5324V9.96021H171.964V23.105H183.025L184.094 25.3759C184.094 25.4472 183.853 25.5184 183.372 25.5896C182.892 25.6431 182.063 25.6698 180.888 25.6698H168.171ZM186.486 25.6698V9.96021H190.013V25.6698H186.486ZM194.555 25.6698V12.0976L194.287 9.96021H198.135L207.218 19.4715L208.26 20.9142H208.554V9.96021H212.081V25.6698H208.688L199.39 15.9983L198.348 14.7426H198.081V25.6698H194.555ZM233.112 25.937C232.239 25.937 231.482 25.7589 230.841 25.4026C230.2 25.0464 229.567 24.5655 228.944 23.9599C228.267 23.2475 227.448 22.4281 226.486 21.502C226.041 21.0389 225.587 20.6559 225.123 20.3531C224.66 20.0503 224.135 19.8188 223.547 19.6585C222.977 19.4982 222.265 19.418 221.41 19.418H220.154V25.6698H216.627V12.0976L216.36 9.96021H220.154V16.7998H221.65C222.006 16.7998 222.3 16.7552 222.532 16.6662C222.763 16.5771 222.977 16.4346 223.173 16.2387C223.672 15.74 224.242 15.1166 224.883 14.3685C225.524 13.6204 226.148 12.8546 226.753 12.0709C227.377 11.2693 227.911 10.5658 228.356 9.96021H232.684L231.589 11.5632C231.09 12.0798 230.556 12.6408 229.986 13.2464C229.416 13.852 228.855 14.4487 228.303 15.0364C227.751 15.6064 227.252 16.114 226.807 16.5593C226.361 16.9868 226.032 17.2985 225.818 17.4944C226.299 17.6547 226.735 17.8595 227.127 18.1089C227.537 18.3583 228.036 18.7234 228.623 19.2043C229.069 19.5605 229.496 19.9256 229.906 20.2997C230.333 20.6737 230.823 21.119 231.375 21.6355C231.999 22.2055 232.586 22.6241 233.139 22.8912C233.691 23.1584 234.154 23.3276 234.528 23.3989C234.92 23.4701 235.169 23.5057 235.276 23.5057L234.742 25.6698C234.688 25.7232 234.528 25.7767 234.261 25.8301C233.993 25.9013 233.611 25.937 233.112 25.937Z"
              fill="white"
            />
          </svg>
        </div>

        <div class="controls">
          <div class="control-group">
            <label for="trackerSelect">Drone:</label>
            <div class="select-with-add">
              <select id="trackerSelect">
                <option value="">Selecteer drone...</option>
              </select>
              <button
                class="btn-icon"
                id="addDroneBtn"
                title="Nieuwe Drone Registreren"
              >
                +
              </button>
            </div>
          </div>

          <div class="control-group simulation-control">
            <label class="switch">
              <input type="checkbox" id="vpnMode" />
              <span class="slider round"></span>
            </label>
            <span class="label-text">VPN Mode (Sim)</span>
          </div>

          <button class="btn-icon" id="settingsBtn" title="Instellingen">
            ‚öôÔ∏è
          </button>

          <div class="status" id="status">
            <span class="status-dot"></span>
            <span class="status-text">Ready</span>
          </div>
        </div>
      </header>

      <!-- Settings Panel (Hidden by default) -->
      <div class="settings-panel" id="settingsPanel" style="display: none">
        <h4>Instellingen</h4>
        <div class="input-group">
          <label for="apiKeyInput">API Key (Railway):</label>
          <input
            type="password"
            id="apiKeyInput"
            placeholder="dev-secret-key-..."
          />
          <small>Wordt alleen lokaal in je browser bewaard.</small>
        </div>
        <button class="btn-primary" id="saveSettingsBtn">Opslaan</button>
      </div>

      <!-- Registration Modal (Hidden by default) -->
      <div class="modal-overlay" id="registrationModal" style="display: none">
        <div class="modal">
          <h3>Nieuwe Drone Registreren</h3>
          <p>Voer een unieke naam in voor je drone:</p>
          <input type="text" id="newDroneId" placeholder="bijv. drone-01" />
          <div class="modal-actions">
            <button class="btn-secondary" id="cancelRegistrationBtn">
              Annuleren
            </button>
            <button class="btn-primary" id="confirmRegistrationBtn">
              Registreren
            </button>
          </div>
        </div>
      </div>

      <!-- Map Container -->
      <main class="content">
        <div id="map"></div>

        <!-- Info Panel -->
        <div class="info-panel" id="infoPanel">
          <header class="panel-header">
            <h3>Drone Informatie</h3>
            <span class="badge" id="droneStatusBadge">Offline</span>
          </header>

          <div class="stats-grid">
            <div class="stat-item">
              <span class="label">Hoogte</span>
              <span class="value" id="infoAlt">0m</span>
            </div>
            <div class="stat-item">
              <span class="label">Aankomst (ETA)</span>
              <span class="value" id="infoETA">--:--</span>
            </div>
          </div>

          <div class="info-details">
            <div class="info-item">
              <span class="label">Drone ID:</span>
              <span class="value" id="infoTrackerId">-</span>
            </div>
            <div class="info-item">
              <span class="label">Heading:</span>
              <span class="value" id="infoHeading">0¬∞</span>
            </div>
            <div class="info-item">
              <span class="label">Co√∂rdinaten:</span>
              <span class="value mono" id="infoCoords">-</span>
            </div>
            <div class="info-item">
              <span class="label">Laatst gezien:</span>
              <span class="value" id="infoTime">-</span>
            </div>
          </div>

          <div
            class="alert-container"
            id="alertContainer"
            style="display: none"
          >
            <div class="alert danger">
              <span class="alert-icon">‚ö†Ô∏è</span>
              <span class="alert-text" id="alertMessage"
                >Tegenwind gedetecteerd</span
              >
            </div>
          </div>

          <div class="panel-actions">
            <button class="btn-secondary" id="simulateFlight">
              üöÄ Start Autonome Vlucht
            </button>
            <button class="btn-danger" id="resetDrone">
              ‚ôªÔ∏è Reset Drone Locatie
            </button>
          </div>
        </div>

        <!-- Delivery Success Overlay -->
        <div class="delivery-overlay" id="deliveryOverlay">
          <div class="delivery-card">
            <div class="success-icon">‚úì</div>
            <h2>Pakket Bezorgd!</h2>
            <p>Jouw pakket is veilig geland voor je deur.</p>
            <div class="delivery-details">
              <div class="detail">
                <span class="label">Tijdstip</span>
                <span class="value" id="deliveredTime">-</span>
              </div>
              <div class="detail">
                <span class="label">Drone</span>
                <span class="value" id="deliveredDrone">-</span>
              </div>
            </div>
            <button class="btn-primary" id="closeOverlay">Sluiten</button>
          </div>
        </div>
      </main>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- App JS -->
    <script src="app.js"></script>
  </body>
</html>
